(this["webpackJsonpbookstore-frontend"]=this["webpackJsonpbookstore-frontend"]||[]).push([[0],{16:function(e,t,r){"use strict";r.d(t,"b",(function(){return o}));var n=r(103),c=r(88);function a(){var e=Object(n.a)(["",""]);return a=function(){return e},e}var s=new c.GraphQLClient("https://bookstore-backend-99.herokuapp.com/graphql"),i=localStorage.getItem("token");function o(e,t){return s.request(Object(c.gql)(a(),e),t)}i&&s.setHeader("authorization","Bearer "+i),t.a=s},186:function(e,t,r){},187:function(e,t,r){"use strict";r.r(t);var n=r(2),c=r(222),a=r(1),s=r.n(a),i=r(55),o=r.n(i),j=r(5),u=r.n(j),l=r(6),d=r(11),b=r(4),O=r(227),h=r(15),x=r(26),p=r(142),f=r(107),m=r(189),g=r(137),v=r(191),y=r(106),w=r.p+"static/media/books.7f599b8f.png",k=r(51),S=r(127),C=r.n(S),$=r(62),T=r(12),E=function(e){var t=e.currentSlide,r=(e.slideCount,Object(k.a)(e,["currentSlide","slideCount"]));return Object(n.jsx)($.a,Object(l.a)(Object(l.a)({w:8,h:8,as:T.l},r),{},{className:"slick-prev slick-arrow"+(0===t?" slick-disabled":""),_hover:{color:"black"},"aria-hidden":"true","aria-disabled":0===t}))},A=function(e){var t=e.currentSlide,r=e.slideCount,c=Object(k.a)(e,["currentSlide","slideCount"]);return Object(n.jsx)($.a,Object(l.a)(Object(l.a)({w:8,h:8,as:T.m},c),{},{className:"slick-next slick-arrow"+(t===r-1?" slick-disabled":""),_hover:{color:"black"},"aria-hidden":"true","aria-disabled":t===r-1}))};function W(e){var t=e.children,r=Object(k.a)(e,["children"]),c=Object(l.a)({dots:!0,infinite:!1,speed:500,arrows:!1,slidesToShow:1,slidesToScroll:1,prevArrow:Object(n.jsx)(E,{}),nextArrow:Object(n.jsx)(A,{}),responsive:[{breakpoint:992,settings:{slidesToShow:2,dots:!0,arrows:!1}},{breakpoint:768,settings:{slidesToShow:1,dots:!0,arrows:!1}}]},r);return Object(n.jsx)(C.a,Object(l.a)(Object(l.a)({lazyLoad:"ondemand"},c),{},{children:t}))}var P=r(77),z=r.n(P);function I(){var e=Object(p.d)("pink.50","pink.500");return Object(n.jsxs)(f.b,{bg:e,py:[12,24],px:[4,6,12],direction:["column","column","row"],justify:"space-between",align:"center",spacing:4,children:[Object(n.jsxs)(f.d,{align:"flex-start",spacing:3,children:[Object(n.jsx)(z.a,{delay:500,children:Object(n.jsx)(m.a,{size:"sm",color:"gray.500",children:"THE BOOKSTORE EDITORS'"})}),Object(n.jsxs)(z.a,{delay:600,children:[Object(n.jsx)(m.a,{size:"2xl",fontWeight:"none",children:"Featured Books of the"}),Object(n.jsx)(m.a,{size:"2xl",children:"February"})]}),Object(n.jsx)(z.a,{delay:700,children:Object(n.jsx)(g.a,{as:h.b,to:"/store",colorScheme:"blue",children:"See More"})})]}),Object(n.jsx)(z.a,{delay:500,children:Object(n.jsx)(v.a,{w:"auto",h:["auto","auto",180,240],src:w})})]})}function q(){return Object(n.jsx)(y.a,{mb:4,children:Object(n.jsxs)(W,{responsive:null,children:[Object(n.jsx)(I,{}),Object(n.jsx)(I,{})]})})}var R=r(90);function D(e){var t=e.blockName,r=e.rightButtonName,c=e.to,a=void 0===c?"/store":c,s=e.children;return Object(n.jsxs)(y.a,{px:[4,6,12],py:[8],children:[t&&Object(n.jsxs)(f.b,{direction:["column","column","row"],justify:"space-between",mb:[4,8],children:[Object(n.jsx)(m.a,{children:t}),r&&Object(n.jsxs)(R.a,{d:"flex",alignItems:"center",as:h.b,to:a,children:[r," ",Object(n.jsx)($.a,{ml:2,as:T.m})]})]}),s]})}var F=r(31),B=r.n(F),_=r(223),L=r(224),N=r(91),H=r(29),M=r(9),U=r(28);function V(e){var t=e.id,r=Object(U.b)(),c=r.state,a=c.cart.items,s=c.auth.isLogin,i=r.dispatch,o=Object(H.b)(),j=o.handleSubmit,l=o.register,b=Object(_.a)();function O(){return(O=Object(d.a)(u.a.mark((function e(r){var n,c,o,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=3;break}return b({status:"info",title:"Login to add book to cart"}),e.abrupt("return");case 3:return n=a.find((function(e){return e.id===t})),c={quantity:1,id:t},n&&(c.quantity=Number(r.quantity)+n.quantity),e.prev=6,e.next=9,Object(M.c)({input:c});case 9:o=e.sent,j=o.cart,i({type:"SET_CART",payload:j}),b({title:"A book is added to cart"}),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(6),e.t0;case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}function h(){return(h=Object(d.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=3;break}return b({status:"info",title:"Login to add book to wishlist"}),e.abrupt("return");case 3:return e.prev=3,e.next=6,Object(M.g)({id:t});case 6:r=e.sent,r.result,b({title:"A book is added to wishlist"}),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(3),e.t0;case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}return Object(n.jsx)("form",{onSubmit:j((function(e){return function(e){return O.apply(this,arguments)}(e)})),children:Object(n.jsxs)(f.a,{children:[Object(n.jsxs)(L.c,{defaultValue:1,min:1,w:100,max:20,children:[Object(n.jsx)(L.d,{name:"quantity",ref:l}),Object(n.jsxs)(L.e,{children:[Object(n.jsx)(L.b,{}),Object(n.jsx)(L.a,{})]})]}),Object(n.jsx)(N.a,{icon:Object(n.jsx)($.a,{as:T.g}),type:"submit",colorScheme:"blue"}),Object(n.jsx)(N.a,{color:"pink.500",onClick:function(){return h.apply(this,arguments)},icon:Object(n.jsx)($.a,{as:T.p})})]})})}function J(e){var t=e.inSlider,r=void 0!==t&&t,c=e.id,s=e.name,i=e.price,o=e.discount,j=e.images,u=e.authors,d=e.slug,b=Object(a.useMemo)((function(){return r?{borderRadius:"md",borderWidth:1,p:4,m:2}:{borderRightWidth:1,borderBottomWidth:1,p:4}}),[r]);return Object(n.jsxs)(f.d,Object(l.a)(Object(l.a)({},b),{},{children:[Object(n.jsx)(v.a,{objectFit:"contain",w:120,src:j[0].secure_url}),Object(n.jsxs)(f.d,{align:"stretch",spacing:1,pt:2,children:[Object(n.jsx)(R.a,{to:"/store/book/"+d,as:h.b,fontWeight:"bold",fontSize:"xl",noOfLines:2,children:s}),Object(n.jsx)(R.a,{color:"gray.500",children:u.map((function(e){return e.name})).join(", ")}),Object(n.jsxs)(f.a,{align:"baseline",children:[Object(n.jsxs)(R.a,{fontSize:"xl",fontWeight:"bold",children:[Object(n.jsx)(B.a,{value:i*(1-o),decimalScale:2,displayType:"text",thousandSeparator:!0,prefix:"$"})," "]}),o>0&&Object(n.jsx)(R.a,{as:"s",fontSize:"sm",children:Object(n.jsx)(B.a,{value:i,displayType:"text",thousandSeparator:!0,prefix:"$"})})]}),Object(n.jsx)(V,{id:c})]})]}))}function G(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),r=t[0],c=t[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.o)({search:"order=0",limit:10});case 2:t=e.sent,r=t.products,c(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsx)(D,{blockName:"BestSelling Books",rightButtonName:"View All",to:"/store/search?order=0",children:Object(n.jsx)(W,{slidesToShow:5,dots:!1,arrows:!0,children:r.map((function(e){return Object(a.createElement)(J,Object(l.a)(Object(l.a)({inSlider:!0},e),{},{key:e.id}))}))})})}var Q=r(205);function K(e){var t=e.id,r=e.name,c=e.avatar,a=e.books;return Object(n.jsxs)(f.d,{as:h.b,to:"/store/search?author="+t,children:[Object(n.jsx)(Q.a,{size:"2xl",src:c}),Object(n.jsxs)(y.a,{textAlign:"center",children:[Object(n.jsx)(R.a,{fontWeight:"bold",children:r}),Object(n.jsxs)(R.a,{children:[a," Published Books"]})]})]})}function Y(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),r=t[0],c=t[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.j)();case 2:t=e.sent,r=t.authors,c(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsx)(D,{blockName:"Favourite Authors",children:Object(n.jsx)(W,{slidesToShow:5,arrows:!0,dots:!1,children:r.map((function(e){return Object(n.jsx)(K,Object(l.a)({},e),e.id)}))})})}var X=r(225),Z=r(208);function ee(){var e=Object(a.useState)({featuredBooks:[],saleBooks:[],newestBooks:[]}),t=Object(b.a)(e,2),r=t[0],c=t[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,r,n,a,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.o)({search:"order=4",limit:10});case 2:return t=e.sent,r=t.products,e.next=6,Object(M.o)({search:"order=1",limit:10});case 6:return n=e.sent,a=n.products,e.next=10,Object(M.o)({search:"order=0",limit:10});case 10:s=e.sent,i=s.products,c({saleBooks:r,newestBooks:a,featuredBooks:i});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsx)(D,{blockName:"Featured Books",children:Object(n.jsxs)(X.e,{isFitted:!0,variant:"enclosed",children:[Object(n.jsxs)(X.b,{children:[Object(n.jsx)(X.a,{children:"Featured"}),Object(n.jsx)(X.a,{children:"On Sale"}),Object(n.jsx)(X.a,{children:"Newest"})]}),Object(n.jsxs)(X.d,{children:[Object(n.jsx)(X.c,{px:0,children:Object(n.jsx)(Z.a,{borderTopWidth:1,borderLeftWidth:1,columns:[1,2,3,5],children:r.featuredBooks.map((function(e){return Object(n.jsx)(J,Object(l.a)({},e),e.id)}))})}),Object(n.jsx)(X.c,{px:0,children:Object(n.jsx)(Z.a,{borderTopWidth:1,borderLeftWidth:1,columns:[1,2,3,5],children:r.saleBooks.map((function(e){return Object(n.jsx)(J,Object(l.a)({},e),e.id)}))})}),Object(n.jsx)(X.c,{px:0,children:Object(n.jsx)(Z.a,{borderTopWidth:1,borderLeftWidth:1,columns:[1,2,3,5],children:r.newestBooks.map((function(e){return Object(n.jsx)(J,Object(l.a)({},e),e.id)}))})})]})]})})}var te=r(71);function re(){var e=Object(p.d)("pink.50","pink.500"),t=Object(a.useState)([]),r=Object(b.a)(t,2),c=r[0],s=r[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.k)();case 2:t=e.sent,r=t.categories.reverse().filter((function(e){return null===e.parent})).slice(0,4),s(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsx)(D,{blockName:"Featured Categories",rightButtonName:"All Categories",to:"/store/search",children:Object(n.jsx)(Z.a,{columns:[1,2,3,4],gap:2,children:c.map((function(t){return Object(n.jsxs)(f.d,{align:"flex-start",borderRadius:"md",bg:e,px:8,py:6,children:[Object(n.jsx)($.a,{w:12,h:12,as:te[t.icon||"FcReading"]}),Object(n.jsx)(R.a,{noOfLines:1,fontSize:"2xl",children:t.name}),Object(n.jsx)(R.a,{_hover:{cursor:"pointer"},to:"/store/search?category="+t.id,as:h.b,size:"lg",children:"Shop Now"})]},t.id)}))})})}var ne=r(30),ce=r(133);function ae(){var e=Object(p.d)("pink.50","pink.500"),t=Object(a.useState)([]),r=Object(b.a)(t,2),c=r[0],s=r[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,r,n,c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.k)();case 2:t=e.sent,r=t.categories,n=Object(ne.a)(r),e.prev=5,n.s();case 7:if((c=n.n()).done){e.next=14;break}return a=c.value,e.next=11,Object(M.o)({search:"order=4&category="+a.id,limit:9});case 11:a.products=e.sent.products;case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:s(r);case 23:case"end":return e.stop()}}),e,null,[[5,16,19,22]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsx)(D,{blockName:"New Releases",children:Object(n.jsxs)(Z.a,{columns:[1,1,3],gap:4,children:[Object(n.jsx)(ce.b,{colSpan:1,bg:e,borderRadius:"md",children:Object(n.jsxs)(f.d,{align:"stretch",p:8,justify:"center",children:[Object(n.jsx)(v.a,{objectFit:"contain",src:w}),Object(n.jsxs)(f.d,{align:"flex-start",children:[Object(n.jsx)(R.a,{fontSize:"4xl",children:"Get Extra"}),Object(n.jsx)(R.a,{fontSize:"5xl",textColor:"red.500",children:"Sale -25%"}),Object(n.jsxs)(R.a,{fontSize:"2xl",fontWeight:"bold",children:["ON ORDER OVER ",Object(n.jsx)("br",{}),"$100"]}),Object(n.jsx)(g.a,{colorScheme:"blue",children:"View More"})]})]})}),Object(n.jsx)(ce.b,{colSpan:[1,1,2],px:[0,0,4],overflow:"overlay",children:Object(n.jsxs)(X.e,{isFitted:!0,variant:"enclosed",children:[Object(n.jsx)(X.b,{overflowY:"scroll",children:c.map((function(e){return Object(n.jsx)(X.a,{children:e.name},e.id)}))}),Object(n.jsx)(X.d,{children:c.map((function(e){return Object(n.jsx)(X.c,{px:0,pb:0,children:Object(n.jsx)(Z.a,{borderTopWidth:1,borderLeftWidth:1,columns:[1,2,2,3],children:e.products.map((function(e){return Object(n.jsx)(J,Object(l.a)({},e),e.id)}))})},e.id)}))})]})})]})})}function se(e){var t=e.id,r=e.name,c=e.price,a=e.discount,s=e.images,i=e.authors,o=e.slug,j=Object(p.d)("white","blue.900");return Object(n.jsxs)(f.b,{direction:["column","column","row"],borderWidth:1,borderRadius:"md",px:4,py:4,mx:2,spacing:5,bg:j,children:[Object(n.jsx)(v.a,{h:60,objectFit:"contain",src:s[0].secure_url}),Object(n.jsxs)(f.d,{align:"stretch",spacing:1,children:[Object(n.jsx)(R.a,{as:h.b,to:"/store/book"+o,fontWeight:"bold",fontSize:"xl",noOfLines:2,children:r}),Object(n.jsx)(R.a,{children:i.map((function(e){return e.name})).join(", ")}),Object(n.jsxs)(f.a,{align:"baseline",children:[Object(n.jsxs)(R.a,{fontSize:"xl",fontWeight:"bold",children:[Object(n.jsx)(B.a,{value:c*(1-a),decimalScale:2,displayType:"text",thousandSeparator:!0,prefix:"$"})," "]}),a>0&&Object(n.jsx)(R.a,{as:"s",fontSize:"sm",children:Object(n.jsx)(B.a,{value:c,displayType:"text",thousandSeparator:!0,prefix:"$"})})]}),Object(n.jsx)(V,{id:t})]})]})}function ie(){var e=Object(p.d)("pink.50","pink.500"),t=Object(a.useState)([]),r=Object(b.a)(t,2),c=r[0],s=r[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.o)({search:"range=1-25",limit:10});case 2:t=e.sent,r=t.products,s(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsx)(y.a,{bg:e,children:Object(n.jsx)(D,{blockName:"Deals of the Week",children:Object(n.jsx)(W,{slidesToShow:2,dots:!1,arrows:!0,children:c.map((function(e){return Object(n.jsx)(se,Object(l.a)({},e),e.id)}))})})})}function oe(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(q,{}),Object(n.jsx)(re,{}),Object(n.jsx)(G,{}),Object(n.jsx)(ee,{}),Object(n.jsx)(ie,{}),Object(n.jsx)(ae,{}),Object(n.jsx)(Y,{})]})}function je(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(Z.a,{columns:[1,2,2,6],px:[4,6,12],py:16,borderTopWidth:1,gap:8,children:[Object(n.jsxs)(ce.b,{colSpan:[1,2],children:[Object(n.jsx)(m.a,{children:"Bookstore"}),Object(n.jsx)(R.a,{mt:6,children:"1418 River Drive, Suite 35 Cottonhall, CA 9622 United States"}),Object(n.jsxs)(R.a,{mt:6,children:["sale@bookstore.example",Object(n.jsx)("br",{}),"+1 246-345-0695"]}),Object(n.jsxs)(f.a,{mt:8,spacing:8,children:[Object(n.jsx)($.a,{as:T.r}),Object(n.jsx)($.a,{as:T.n}),Object(n.jsx)($.a,{as:T.J}),Object(n.jsx)($.a,{as:T.H}),Object(n.jsx)($.a,{as:T.v})]})]}),Object(n.jsxs)(ce.b,{children:[Object(n.jsx)(m.a,{size:"lg",children:"Explore"}),Object(n.jsxs)(f.d,{mt:6,align:"flex-start",children:[Object(n.jsx)(R.a,{children:"About us"}),Object(n.jsx)(R.a,{children:"Site map"}),Object(n.jsx)(R.a,{children:"Bookmarks"}),Object(n.jsx)(R.a,{children:"Sign in/Join"})]})]}),Object(n.jsxs)(ce.b,{children:[Object(n.jsx)(m.a,{size:"lg",children:"Explore"}),Object(n.jsxs)(f.d,{mt:6,align:"flex-start",children:[Object(n.jsx)(R.a,{children:"About us"}),Object(n.jsx)(R.a,{children:"Site map"}),Object(n.jsx)(R.a,{children:"Bookmarks"}),Object(n.jsx)(R.a,{children:"Sign in/Join"})]})]}),Object(n.jsxs)(ce.b,{children:[Object(n.jsx)(m.a,{size:"lg",children:"Explore"}),Object(n.jsxs)(f.d,{mt:6,align:"flex-start",children:[Object(n.jsx)(R.a,{children:"About us"}),Object(n.jsx)(R.a,{children:"Site map"}),Object(n.jsx)(R.a,{children:"Bookmarks"}),Object(n.jsx)(R.a,{children:"Sign in/Join"})]})]}),Object(n.jsxs)(ce.b,{children:[Object(n.jsx)(m.a,{size:"lg",children:"Explore"}),Object(n.jsxs)(f.d,{mt:6,align:"flex-start",children:[Object(n.jsx)(R.a,{children:"About us"}),Object(n.jsx)(R.a,{children:"Site map"}),Object(n.jsx)(R.a,{children:"Bookmarks"}),Object(n.jsx)(R.a,{children:"Sign in/Join"})]})]})]}),Object(n.jsxs)(f.b,{direction:["column","column","row"],align:"center",px:[4,6,12],py:8,borderTopWidth:1,justify:"space-between",children:[Object(n.jsx)(R.a,{children:"\xa92020 Book Worm. All rights reserved"}),Object(n.jsxs)(f.a,{spacing:[8,12],children:[Object(n.jsx)($.a,{w:10,h:10,as:T.h}),Object(n.jsx)($.a,{w:10,h:10,as:T.t}),Object(n.jsx)($.a,{w:10,h:10,as:T.E}),Object(n.jsx)($.a,{w:10,h:10,as:T.i})]})]})]})}var ue=r(211),le=r(212),de=r(213),be=r(214),Oe=r(201),he=r(228),xe=r(46),pe=r(21),fe=r(209),me=[],ge=[];function ve(e){var t=e.categories,r=Object(a.useState)(Object(pe.a)(t)),c=Object(b.a)(r,2),s=c[0],i=c[1],o=Object(a.useState)(null),j=Object(b.a)(o,2),u=j[0],l=j[1],d=Object(x.g)().push;function O(e){e.children&&e.children.length>0?(me.push(s),ge.push(e),i(e.children),l(e)):d("/store/search?category="+e.id)}return Object(n.jsxs)(f.d,{align:"stretch",spacing:3,children:[u&&Object(n.jsxs)(fe.a,{onClick:function(){if(i(me.pop()),1===ge.length)return ge.pop(),void l(null);ge.pop(),l(ge[ge.length-1])},_hover:{cursor:"pointer"},align:"center",children:[Object(n.jsx)($.a,{mr:2,as:T.l}),Object(n.jsx)(R.a,{children:u.name})]}),s.map((function(e){return Object(n.jsxs)(fe.a,{onClick:function(){return O(e)},_hover:{cursor:"pointer"},align:"center",justify:"space-between",children:[Object(n.jsx)(R.a,{children:e.name}),e.children&&e.children.length>0&&Object(n.jsx)($.a,{as:T.m})]},e.id)})),s.length>0&&Object(n.jsx)(fe.a,{onClick:function(){return O({id:u.id})},_hover:{cursor:"pointer"},align:"center",justify:"space-between",children:Object(n.jsx)(R.a,{children:"Rest"})})]})}var ye=Object(a.forwardRef)((function(e,t){var r=e.isOpen,c=e.onClose,a=e.categories;return Object(n.jsx)(he.a,{isOpen:r,placement:"left",onClose:c,finalFocusRef:t,children:Object(n.jsx)(xe.h,{children:Object(n.jsxs)(he.b,{children:[Object(n.jsx)(xe.c,{}),Object(n.jsx)(xe.g,{children:"MENU"}),Object(n.jsx)(xe.b,{children:Object(n.jsx)(ve,{categories:a})})]})})})})),we=r(135),ke=r.n(we),Se=r(56);function Ce(e){var t=e.categories,r=Object(ue.a)(),c=r.isOpen,s=r.onClose,i=r.onOpen,o=Object(a.useRef)(),j=Object(x.g)(),O=Object(a.useState)(""),p=Object(b.a)(O,2),g=p[0],v=p[1],w=Object(a.useState)([]),k=Object(b.a)(w,2),S=k[0],C=k[1],E=Object(a.useState)(!1),A=Object(b.a)(E,2),W=A[0],P=A[1],z=Object(a.useMemo)((function(){return g.trim()}),[g]);function I(){return(I=Object(d.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,e.next=4,Object(M.o)({search:"keyword="+t,limit:3});case 4:r=e.sent,n=r.products,C(n),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(1),e.t0;case 12:return e.prev=12,P(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})))).apply(this,arguments)}var q=Object(a.useCallback)(ke.a.debounce((function(e){return I.apply(this,arguments)}),300),[]);return Object(a.useEffect)((function(){var e,t=Object(ne.a)(j.location.search.substr(1).split("&"));try{for(t.s();!(e=t.n()).done;){var r=e.value.split("=");"keyword"===r[0]&&v(r[1])}}catch(n){t.e(n)}finally{t.f()}}),[]),Object(n.jsxs)(f.b,{direction:["column","column","column","row"],px:[4,6,12],py:6,borderBottomWidth:1,justify:"space-between",align:["stretch","stretch","center"],children:[Object(n.jsxs)(f.a,{spacing:[4,8],children:[Object(n.jsx)(N.a,{onClick:i,size:"md",icon:Object(n.jsx)($.a,{as:T.a})}),Object(n.jsx)(m.a,{as:h.b,to:"/store",children:"Bookstore"})]}),Object(n.jsxs)(y.a,{w:["auto","auto",300],pos:"relative",children:[Object(n.jsxs)(le.a,{children:[Object(n.jsx)(de.a,{pointerEvents:"none",children:Object(n.jsx)($.a,{as:T.A})}),Object(n.jsx)(be.a,{value:g,onChange:function(e){var t=e.target.value;v(t),""!==z&&q(z)},onKeyPress:function(e){"Enter"===e.key&&j.push("/store/search?keyword="+z)},placeholder:"Search by keyword"}),Object(n.jsx)(de.b,{children:Object(n.jsx)(N.a,{colorScheme:"blue",onClick:function(){return v("")},icon:Object(n.jsx)($.a,{as:T.f})})})]}),""!==z&&Object(n.jsx)(f.d,{right:0,left:0,align:"stretch",bg:"white",mt:4,borderWidth:1,borderRadius:"md",p:3,pos:"absolute",zIndex:"banner",children:W?Object(n.jsx)(Oe.a,{color:"blue.500",alignSelf:"center"}):S.length>0?Object(n.jsxs)(n.Fragment,{children:[S.map((function(e){return Object(a.createElement)(Se.a,Object(l.a)(Object(l.a)({},e),{},{key:e.id}))})),Object(n.jsx)(R.a,{textAlign:"center",color:"blue.500",as:h.b,onClick:function(){return v("")},to:"/store/search?keyword="+z,children:"See more books"})]}):Object(n.jsx)(R.a,{children:"Please change another keyword"})})]}),Object(n.jsx)(ye,{categories:t,ref:o,isOpen:c,onClose:s})]})}function $e(){return Object(n.jsxs)(f.d,{borderTopWidth:1,py:16,px:[4,6,12],spacing:4,children:[Object(n.jsx)(m.a,{children:"Join Our Newsletter"}),Object(n.jsx)(R.a,{children:"Signup to be the first to hear about exclusive deals, special offers and upcoming collections"}),Object(n.jsx)("form",{children:Object(n.jsxs)(f.a,{minWidth:["auto","auto",500],children:[Object(n.jsx)(be.a,{placeholder:"Enter email for weekly newsletter."}),Object(n.jsx)(g.a,{colorScheme:"blue",type:"submit",children:"Subscribe"})]})})]})}var Te=r(53),Ee=r(215),Ae=r(216),We=r(16);function Pe(e){var t=e.inDrawer,r=Object(H.b)(),c=r.handleSubmit,a=r.errors,s=r.control,i=Object(U.b)().dispatch,o=Object(_.a)(),j={};function b(){return(b=Object(d.a)(u.a.mark((function e(t){var r,n,c,a,s,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(M.u)(Object(l.a)({},t));case 3:return r=e.sent,n=r.token,localStorage.setItem("token",n),We.a.setHeader("authorization","Bearer "+n),e.next=9,Object(M.p)();case 9:c=e.sent,a=c.user,s=c.cart,i({type:"SET_AUTH",payload:Object(l.a)(Object(l.a)({},a),{},{isLogin:!0})}),i({type:"SET_CART",payload:s}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),j=e.t0.response,o({title:j.errors[0].message,status:"error"});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return t||(j.p=4,j.borderWidth=1),Object(n.jsx)("form",{onSubmit:c((function(e){return function(e){return b.apply(this,arguments)}(e)})),children:Object(n.jsxs)(f.d,Object(l.a)(Object(l.a)({align:"stretch"},j),{},{borderRadius:"md",children:[Object(n.jsxs)(Te.a,{isInvalid:a.email,children:[Object(n.jsx)(Ee.a,{htmlFor:"email",children:"Email:"}),Object(n.jsx)(H.a,{id:"email",name:"email",as:be.a,placeholder:"Please enter your email",defaultValue:"",rules:{required:!0,min:6},control:s}),Object(n.jsx)(Ae.a,{children:"This field is required"})]}),Object(n.jsxs)(Te.a,{isInvalid:a.password,children:[Object(n.jsx)(Ee.a,{htmlFor:"password",children:"Password:"}),Object(n.jsx)(H.a,{id:"password",name:"password",as:be.a,type:"password",defaultValue:"",placeholder:"Please enter your password",rules:{required:!0},control:s}),Object(n.jsx)(Ae.a,{children:"This field is required"})]}),Object(n.jsx)(g.a,{type:"submit",colorScheme:"blue",children:"Login"}),Object(n.jsx)(g.a,{as:h.b,to:"/store/register",colorScheme:"green",children:"Create an account"}),Object(n.jsx)(h.b,{to:"/store/forgot-password",children:Object(n.jsx)(R.a,{as:"u",color:"blue.500",children:"Forgot your password?"})})]}))})}var ze=Object(a.forwardRef)((function(e,t){var r=e.isOpen,c=e.onClose,a=Object(U.b)(),s=a.state.auth,i=a.dispatch,o=Object(x.g)();return Object(n.jsx)(he.a,{isOpen:r,placement:"right",onClose:c,finalFocusRef:t,children:Object(n.jsx)(xe.h,{children:Object(n.jsxs)(he.b,{children:[Object(n.jsx)(xe.c,{}),Object(n.jsxs)(xe.g,{children:[Object(n.jsx)($.a,{mr:2,as:T.I}),"Account"]}),Object(n.jsx)(xe.b,{children:s.isLogin?Object(n.jsxs)(f.d,{align:"flex-start",children:[Object(n.jsx)(g.a,{as:h.b,to:"/store/order",colorScheme:"green",children:"Order"}),Object(n.jsx)(g.a,{onClick:function(){Object(M.v)(),i({type:"SET_AUTH",payload:{isLogin:!1}}),o.push("/store")},colorScheme:"red",children:"Logout"})]}):Object(n.jsx)(Pe,{inDrawer:!0})})]})})})})),Ie=function(e){var t=Object(p.c)().toggleColorMode,r=Object(p.d)("dark","light"),c=Object(p.d)(T.s,T.F);return Object(n.jsx)($.a,Object(l.a)({_hover:{cursor:"pointer"},"aria-label":"Switch to ".concat(r," mode"),color:"current",onClick:t,as:c},e))};function qe(){var e=Object(ue.a)(),t=e.isOpen,r=e.onClose,c=e.onOpen;return Object(n.jsxs)(f.a,{px:[4,6,12],py:2,borderBottomWidth:1,justify:["center","center","space-between"],children:[Object(n.jsxs)(f.a,{spacing:8,d:["none","none","flex"],children:[Object(n.jsxs)(fe.a,{align:"center",children:[Object(n.jsx)($.a,{mr:2,as:T.w})," Can we help you?"]}),Object(n.jsxs)(fe.a,{align:"center",children:[Object(n.jsx)($.a,{mr:2,as:T.u})," +1 245-345-789"]})]}),Object(n.jsxs)(f.a,{spacing:8,children:[Object(n.jsx)(h.b,{to:"/store/wishlist",children:Object(n.jsx)($.a,{as:T.p})}),Object(n.jsx)(h.b,{to:"/admin",children:Object(n.jsx)($.a,{as:T.D})}),Object(n.jsx)(R.a,{children:Object(n.jsx)($.a,{_hover:{cursor:"pointer"},onClick:c,as:T.I})}),Object(n.jsx)(h.b,{to:"/store/cart",children:Object(n.jsx)($.a,{as:T.C})}),Object(n.jsx)(R.a,{children:Object(n.jsx)(Ie,{})})]}),Object(n.jsx)(ze,{isOpen:t,onClose:r})]})}function Re(e){var t=e.children,r=Object(a.useState)([]),c=Object(b.a)(r,2),s=c[0],i=c[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(M.k)();case 3:t=e.sent,r=t.categories,i(r.filter((function(e){return!e.parent}))),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsxs)(y.a,{children:[Object(n.jsxs)(y.a,{id:"header",children:[Object(n.jsx)(qe,{}),Object(n.jsx)(Ce,{categories:s})]}),Object(n.jsx)(y.a,{id:"main",children:t}),Object(n.jsxs)(y.a,{id:"footer",children:[Object(n.jsx)($e,{}),Object(n.jsx)(je,{})]})]})}var De=r(217);function Fe(e){var t=e.category,r=[];return function e(t){r.unshift(t),t.parent&&e(t.parent)}(t),Object(n.jsx)(y.a,{px:[4,6,12],py:6,borderBottomWidth:1,children:Object(n.jsxs)(De.a,{children:[Object(n.jsx)(De.b,{children:Object(n.jsx)(De.c,{as:h.b,to:"/store",children:"Home"})}),r.map((function(e,t){return Object(n.jsx)(De.b,{children:Object(n.jsx)(De.c,{as:h.b,to:"/store/search?category="+e.id,isCurrentPage:t===r.length-1,children:e.name})},e.id)}))]})})}var Be=r(218);function _e(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),r=t[0],c=t[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.o)({limit:3});case 2:t=e.sent,r=t.products,c(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.jsx)(f.d,{p:8,spacing:8,borderWidth:1,align:"flex-start",borderRadius:"md",children:r.map((function(e){return Object(n.jsx)(Se.a,Object(l.a)({},e),e.id)}))})}function Le(){return Object(n.jsxs)(f.d,{spacing:8,borderWidth:1,p:8,align:"flex-start",borderRadius:"md",children:[Object(n.jsxs)(f.a,{spacing:8,children:[Object(n.jsx)($.a,{w:16,h:16,color:"red.500",as:T.B}),Object(n.jsxs)(y.a,{children:[Object(n.jsx)(R.a,{fontWeight:"bold",children:"Free Delivery"}),"Orders over $100"]})]}),Object(n.jsxs)(f.a,{spacing:8,children:[Object(n.jsx)($.a,{w:16,h:16,color:"red.500",as:T.x}),Object(n.jsxs)(y.a,{children:[Object(n.jsx)(R.a,{fontWeight:"bold",children:"Secure Payment"}),"100% Secure Payment"]})]}),Object(n.jsxs)(f.a,{spacing:8,children:[Object(n.jsx)($.a,{w:16,h:16,color:"red.500",as:T.k}),Object(n.jsxs)(y.a,{children:[Object(n.jsx)(R.a,{fontWeight:"bold",children:"Money Back Guarantee"}),"Within 30 Days"]})]}),Object(n.jsxs)(f.a,{spacing:8,children:[Object(n.jsx)($.a,{w:16,h:16,color:"red.500",as:T.o}),Object(n.jsxs)(y.a,{children:[Object(n.jsx)(R.a,{fontWeight:"bold",children:"24/7 Support"}),"Within 1 Business Day"]})]})]})}var Ne=r(87);function He(){var e=Object(x.h)().slug,t=Object(a.useState)(null),r=Object(b.a)(t,2),c=r[0],s=r[1],i=Object(a.useState)([]),o=Object(b.a)(i,2),j=o[0],O=o[1];return Object(a.useEffect)((function(){function t(){return(t=Object(d.a)(u.a.mark((function t(){var r,n,c,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(M.n)({slug:e});case 3:return r=t.sent,n=r.product,t.next=7,Object(M.o)({search:"category="+n.category.id,limit:10});case 7:c=t.sent,a=c.products,s(n),O(a),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),c?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Ne.a,{}),Object(n.jsx)(Fe,{category:c.category}),Object(n.jsx)(D,{children:Object(n.jsxs)(Z.a,{columns:[1,1,1,3],gap:20,children:[Object(n.jsxs)(ce.b,{colSpan:[1,1,1,2],justifyContent:"stretch",children:[Object(n.jsxs)(Z.a,{columns:[1,1,1,2],gap:8,mb:12,children:[Object(n.jsx)(f.b,{width:[200,250,350],justifySelf:"center",children:Object(n.jsx)(W,{responsive:null,children:c.images.map((function(e){return Object(n.jsx)(v.a,{src:e.secure_url,objectFit:"contain"})}))})}),Object(n.jsxs)(f.d,{spacing:4,align:"stretch",textAlign:"left",children:[Object(n.jsx)(m.a,{children:c.name}),Object(n.jsxs)(R.a,{children:["By (author) ",c.authors.map((function(e){return e.name})).join(", ")]}),Object(n.jsxs)(R.a,{fontSize:"3xl",children:[Object(n.jsx)(B.a,{value:c.price*(1-c.discount),displayType:"text",thousandSeparator:!0,prefix:"$"}),c.discount>0&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("br",{}),Object(n.jsx)(R.a,{as:"s",fontSize:"xl",children:Object(n.jsx)(B.a,{value:c.price,displayType:"text",thousandSeparator:!0,prefix:"$"})})]})]}),Object(n.jsx)(R.a,{noOfLines:4,children:c.description}),Object(n.jsx)(V,{id:c.id})]})]}),Object(n.jsx)(y.a,{borderTopWidth:1,pt:8,children:Object(n.jsxs)(X.e,{isFitted:!0,variant:"enclosed",children:[Object(n.jsxs)(X.b,{children:[Object(n.jsx)(X.a,{children:"Description"}),Object(n.jsx)(X.a,{children:"Product Details"})]}),Object(n.jsxs)(X.d,{children:[Object(n.jsx)(X.c,{children:c.description}),Object(n.jsx)(X.c,{children:Object(n.jsxs)(Be.a,{children:[Object(n.jsxs)(Be.c,{children:[Object(n.jsx)(Be.b,{w:10,h:10,as:te.FcBookmark}),"Category: ",c.category.name]}),Object(n.jsxs)(Be.c,{children:[Object(n.jsx)(Be.b,{w:10,h:10,as:te.FcContacts}),"Author: ",c.authors.map((function(e){return e.name})).join(", ")]})]})})]})]})})]}),Object(n.jsxs)(ce.b,{colSpan:1,children:[Object(n.jsx)(_e,{}),Object(n.jsx)(y.a,{mt:8,children:Object(n.jsx)(Le,{})})]})]})}),Object(n.jsx)(D,{blockName:"Related Products",children:Object(n.jsx)(W,{slidesToShow:5,dots:!1,arrows:!0,children:j.map((function(e){return Object(a.createElement)(J,Object(l.a)(Object(l.a)({inSlider:!0},e),{},{key:e.id}))}))})})]}):"loading......"}var Me=r(220),Ue=r(226),Ve=r(219),Je=r(138),Ge=r(229);function Qe(){var e=Object(x.g)(),t=e.location,r=e.push,c=Object(a.useState)({categories:[],authors:[]}),s=Object(b.a)(c,2),i=s[0],o=s[1],j=Object(a.useState)(null),l=Object(b.a)(j,2),O=l[0],h=l[1],p=Object(a.useState)(null),v=Object(b.a)(p,2),w=v[0],k=v[1],S=Object(a.useState)([0,500]),C=Object(b.a)(S,2),$=C[0],T=C[1],E=Object(a.useState)(0),A=Object(b.a)(E,2),W=A[0],P=A[1];function z(){var e,r=Object(ne.a)(t.search.substr(1).split("&"));try{for(r.s();!(e=r.n()).done;){var n=e.value.split("=");"category"===n[0]?h(n[1]):"author"===n[0]&&k(n[1])}}catch(c){r.e(c)}finally{r.f()}}function I(e,t){"min"===t?e<=$[1]&&e>=0&&T([e,$[1]]):"max"===t&&e>=$[0]&&e<=500&&T([$[0],e])}return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,r,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.k)();case 2:return t=e.sent,r=t.categories,e.next=6,Object(M.j)();case 6:n=e.sent,c=n.authors,o({categories:r,authors:c});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),z()}),[]),Object(a.useEffect)((function(){z()}),[t]),Object(a.useEffect)((function(){var e,n=[],c=Object(ne.a)(t.search.substr(1).split("&"));try{for(c.s();!(e=c.n()).done;){var a=e.value,s=a.split("=");-1===["category","author","range","order"].indexOf(s[0])&&n.push(a)}}catch(i){c.e(i)}finally{c.f()}O&&n.push("category="+O),w&&n.push("author="+w),n.push("range="+$.join("-")),n.push("order="+W),r("/store/search?"+n.join("&"))}),[O,w,$,W]),Object(n.jsx)(y.a,{borderLeftWidth:1,borderRightWidth:1,borderRadius:"md",children:Object(n.jsxs)(Ue.a,{defaultIndex:[0,1,2,3,4],allowToggle:!0,allowMultiple:!0,children:[Object(n.jsxs)(Ue.d,{children:[Object(n.jsxs)(Ue.b,{children:[Object(n.jsx)(y.a,{flex:"1",py:4,textAlign:"left",children:Object(n.jsx)(m.a,{size:"md",children:"Order by"})}),Object(n.jsx)(Ue.c,{})]}),Object(n.jsx)(Ue.e,{pb:4,children:Object(n.jsx)(Ve.a,{value:W,onChange:function(e){P(e.target.value)},children:[{value:0,name:"Best Seller"},{value:1,name:"Newest"},{value:2,name:"Dec Price"},{value:3,name:"Inc Price"},{value:4,name:"On Sale"}].map((function(e){return Object(n.jsx)("option",{value:e.value,children:e.name},e.value)}))})})]}),Object(n.jsxs)(Ue.d,{children:[Object(n.jsxs)(Ue.b,{children:[Object(n.jsx)(y.a,{flex:"1",py:4,textAlign:"left",children:Object(n.jsx)(m.a,{size:"md",children:"Categories "})}),Object(n.jsx)(Ue.c,{})]}),Object(n.jsxs)(Ue.e,{pb:4,children:[Object(n.jsx)(g.a,{size:"sm",onClick:function(){return h(null)},children:"Clear"}),Object(n.jsx)(Je.a,{onChange:function(e){h(e)},children:Object(n.jsx)(f.d,{align:"stretch",children:i.categories.map((function(e){return Object(n.jsx)(Ge.a,{value:e.id,isChecked:e.id===O,children:(e.parent?e.parent.name+"/":"")+e.name},e.id)}))})})]})]}),Object(n.jsxs)(Ue.d,{children:[Object(n.jsxs)(Ue.b,{children:[Object(n.jsx)(y.a,{flex:"1",py:4,textAlign:"left",children:Object(n.jsx)(m.a,{size:"md",children:"Author "})}),Object(n.jsx)(Ue.c,{})]}),Object(n.jsxs)(Ue.e,{pb:4,children:[Object(n.jsx)(g.a,{size:"sm",onClick:function(){return k(null)},children:"Clear"}),Object(n.jsx)(Je.a,{onChange:function(e){return k(e)},children:Object(n.jsx)(f.d,{align:"stretch",children:i.authors.map((function(e){return Object(n.jsx)(Ge.a,{isChecked:e.id===w,value:e.id,children:e.name},e.id)}))})})]})]}),Object(n.jsxs)(Ue.d,{children:[Object(n.jsxs)(Ue.b,{children:[Object(n.jsx)(y.a,{flex:"1",py:4,textAlign:"left",children:Object(n.jsx)(m.a,{size:"md",children:"Filter by price"})}),Object(n.jsx)(Ue.c,{})]}),Object(n.jsxs)(Ue.e,{pb:4,children:["Min:"," ",Object(n.jsxs)(L.c,{value:$[0],onChange:function(e){return I(e,"min")},min:0,max:500,children:[Object(n.jsx)(L.d,{}),Object(n.jsxs)(L.e,{children:[Object(n.jsx)(L.b,{}),Object(n.jsx)(L.a,{})]})]}),"Max:"," ",Object(n.jsxs)(L.c,{value:$[1],onChange:function(e){return I(e,"max")},min:0,max:500,children:[Object(n.jsx)(L.d,{}),Object(n.jsxs)(L.e,{children:[Object(n.jsx)(L.b,{}),Object(n.jsx)(L.a,{})]})]})]})]}),Object(n.jsxs)(Ue.d,{children:[Object(n.jsxs)(Ue.b,{children:[Object(n.jsx)(y.a,{flex:"1",py:4,textAlign:"left",children:Object(n.jsx)(m.a,{size:"md",children:"Featured Books"})}),Object(n.jsx)(Ue.c,{})]}),Object(n.jsx)(Ue.e,{pb:4,children:Object(n.jsx)(_e,{})})]})]})})}var Ke=r(124);function Ye(){var e=Object(x.g)().location,t=Object(a.useState)([]),r=Object(b.a)(t,2),c=r[0],s=r[1],i=Object(a.useState)(!0),o=Object(b.a)(i,2),j=o[0],O=o[1],h=12;function p(){return m.apply(this,arguments)}function m(){return(m=Object(d.a)(u.a.mark((function t(){var r,n,a=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]&&a[0],t.next=3,Object(M.o)({search:e.search&&e.search.substr(1),offset:c.length,limit:h});case 3:n=t.sent,s(r?n.products:c.concat(n.products)),O(n.products.length===h);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){p(!0)}),[e]),Object(a.useEffect)((function(){p(!0)}),[]),Object(n.jsxs)(D,{children:[Object(n.jsx)(Ne.a,{}),Object(n.jsxs)(Z.a,{columns:[1,1,1,4],gap:8,children:[Object(n.jsx)(ce.b,{children:Object(n.jsx)(Qe,{})}),Object(n.jsx)(ce.b,{colSpan:[1,1,1,3],children:Object(n.jsx)(Z.a,{borderTopWidth:1,borderLeftWidth:1,as:Ke.a,next:function(){return p()},dataLength:c.length,hasMore:j,loader:Object(n.jsx)(n.Fragment,{children:Array.from({length:h}).map((function(e,t){return Object(n.jsxs)(f.b,{p:2,borderRightWidth:1,borderBottomWidth:1,children:[Object(n.jsx)(Me.a,{height:"240px"}),Object(n.jsx)(Me.a,{height:"20px"}),Object(n.jsx)(Me.a,{height:"20px"}),Object(n.jsx)(Me.a,{height:"20px"})]},t)}))}),columns:[1,2,3,4],children:c.map((function(e){return Object(n.jsx)(J,Object(l.a)({},e),e.id)}))})})]})]})}function Xe(e){var t=e.items,r=e.total;return Object(n.jsxs)(f.d,{align:"stretch",mb:4,borderWidth:1,p:4,borderRadius:"md",divider:Object(n.jsx)(f.c,{}),children:[t.map((function(e){var t=e.id,r=e.name,c=e.slug,a=e.price,s=e.discount,i=e.quantity;return Object(n.jsxs)(f.a,{justify:"space-between",children:[Object(n.jsxs)(y.a,{children:[Object(n.jsx)(h.b,{to:"/store/book/"+c,children:Object(n.jsx)(R.a,{fontWeight:"bold",children:r})}),Object(n.jsxs)(R.a,{as:"small",children:["x",i]})]}),Object(n.jsx)(R.a,{children:Object(n.jsx)(B.a,{value:a*(1-s)*i,displayType:"text",decimalScale:2,thousandSeparator:!0,prefix:"$"})})]},t)})),Object(n.jsxs)(f.a,{justify:"space-between",children:[Object(n.jsx)(R.a,{children:"Total"}),Object(n.jsx)(R.a,{fontWeight:"bold",children:Object(n.jsx)(B.a,{value:r,displayType:"text",decimalScale:2,thousandSeparator:!0,prefix:"$"})})]})]})}var Ze=r(61);function et(){var e=Object(H.b)(),t=e.handleSubmit,r=e.errors,c=e.control,s=Object(a.useState)(!1),i=Object(b.a)(s,2),o=i[0],j=i[1],O=Object(x.g)().push,h=Object(U.b)(),p=h.state,m=p.cart,v=m.total,w=m.items,k=p.auth.email,S=h.dispatch,C=Object(_.a)(),$=Object(Ze.useStripe)(),T=Object(Ze.useElements)();function E(){return(E=Object(d.a)(u.a.mark((function e(t){var r,n,c,a,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($&&T){e.next=2;break}return e.abrupt("return");case 2:return j(!1),r=T.getElement(Ze.CardElement),e.prev=4,e.next=7,Object(M.s)({total:100*v});case 7:return n=e.sent,c=n.code,e.next=11,$.confirmCardPayment(c,{payment_method:{card:r,billing_details:Object(l.a)(Object(l.a)({},t),{},{email:k})}});case 11:if(a=e.sent,s=a.error,i=a.paymentIntent,!s){e.next=18;break}"validation_error"===s.type&&j(!0),e.next=23;break;case 18:return e.next=20,Object(M.h)({input:Object(l.a)(Object(l.a)({},t),{},{paymentID:i.id,total:v,items:w.map((function(e){return{id:e.id,quantity:e.quantity,price:e.price,discount:e.discount}}))})});case 20:S({type:"SET_CART",payload:[]}),O("/store"),C({title:"Your order will be processed as soon as possible"});case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(4),C({status:"error",title:"Checkout Error. Try again!"});case 28:case"end":return e.stop()}}),e,null,[[4,25]])})))).apply(this,arguments)}return Object(n.jsx)("form",{onSubmit:t((function(e){return function(e){return E.apply(this,arguments)}(e)})),children:Object(n.jsxs)(f.d,{align:"flex-start",p:4,borderWidth:1,borderRadius:"md",children:[Object(n.jsxs)(Te.a,{isInvalid:r.name,children:[Object(n.jsx)(Ee.a,{htmlFor:"name",children:"Fullname:"}),Object(n.jsx)(H.a,{id:"name",name:"name",as:be.a,placeholder:"Please enter your fullname",defaultValue:"",rules:{required:!0,min:6},control:c}),Object(n.jsx)(Ae.a,{children:"This field is required"})]}),Object(n.jsxs)(Te.a,{isInvalid:r.address,children:[Object(n.jsx)(Ee.a,{htmlFor:"address",children:"Address:"}),Object(n.jsx)(H.a,{id:"address",name:"address",as:be.a,placeholder:"Please enter your address",defaultValue:"",rules:{required:!0,min:6},control:c}),Object(n.jsx)(Ae.a,{children:"This field is required"})]}),Object(n.jsxs)(Te.a,{isInvalid:r.phone,children:[Object(n.jsx)(Ee.a,{htmlFor:"Phone",children:"Phone:"}),Object(n.jsx)(H.a,{id:"phone",name:"phone",as:be.a,placeholder:"Please enter your phone number",defaultValue:"",control:c,rules:{required:!0,pattern:/^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*$/}}),Object(n.jsx)(Ae.a,{children:"This field is required and phone number format"})]}),Object(n.jsxs)(Te.a,{children:[Object(n.jsx)(Ee.a,{children:"Payment: "}),Object(n.jsx)(y.a,{p:3,borderWidth:o?2:1,borderColor:o&&"red.500",borderRadius:8,children:Object(n.jsx)(Ze.CardElement,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})})]}),Object(n.jsx)(g.a,{colorScheme:"green",type:"submit",children:"Order"})]})})}var tt=r(57),rt=Object(tt.a)((function(){var e=Object(U.b)().state.cart;return Object(n.jsx)(D,{blockName:"Checkout",children:Object(n.jsxs)(Z.a,{columns:[1,1,3],gap:8,children:[Object(n.jsxs)(ce.b,{colSpan:[1,1,2],children:[Object(n.jsx)(m.a,{mb:4,size:"lg",children:"Billing Address"}),Object(n.jsx)(et,{})]}),Object(n.jsxs)(ce.b,{colSpan:1,order:[-1,-1,2],children:[Object(n.jsx)(m.a,{mb:4,size:"lg",children:"Your Cart"}),Object(n.jsx)(Xe,Object(l.a)({},e))]})]})})})),nt=r(79);function ct(e){var t=e.quantity,r=e.id,c=e.changeQuantity,s=Object(a.useState)(t),i=Object(b.a)(s,2),o=i[0],j=i[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(L.c,{defaultValue:1,onChange:function(e){return j(e)},min:1,value:o,w:70,size:"sm",children:[Object(n.jsx)(L.d,{}),Object(n.jsxs)(L.e,{children:[Object(n.jsx)(L.b,{}),Object(n.jsx)(L.a,{})]})]}),Object(n.jsx)(N.a,{size:"sm",onClick:function(){c(Number(o),r)},colorScheme:"green",icon:Object(n.jsx)($.a,{as:T.j})})]})}var at=Object(tt.a)((function(){var e=Object(U.b)(),t=e.state.cart,r=t.items,c=t.total,s=e.dispatch;function i(e){s({type:"SET_CART",payload:e})}function o(){return(o=Object(d.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(M.c)({input:{quantity:t,id:r}});case 3:n=e.sent,i(n.cart),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function j(){return(j=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(M.z)({productID:t});case 3:r=e.sent,i(r.cart),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var b=Object(a.useMemo)((function(){return[{Header:"Quantity",accessor:"quantity"},{Header:"Product",id:"product",Cell:function(e){var t=e.row.original;return Object(n.jsx)(Se.a,Object(l.a)({},t))}},{Header:"Price",id:"price",accessor:"price",Cell:function(e){var t=e.value,r=e.row.original,c=r.discount,a=r.quantity;return Object(n.jsx)(m.a,{size:"lg",children:Object(n.jsx)(B.a,{value:t*(1-c)*a,displayType:"text",decimalScale:2,thousandSeparator:!0,prefix:"$"})})}},{Header:"Action",id:"action",accessor:"id",Cell:function(e){var t=e.value,r=e.row.original.quantity,c=e.deleteProduct,a=e.changeQuantity;return Object(n.jsxs)(f.a,{children:[Object(n.jsx)(ct,{quantity:r,id:t,changeQuantity:a}),Object(n.jsx)(N.a,{size:"sm",colorScheme:"red",onClick:function(){return c(t)},icon:Object(n.jsx)($.a,{as:T.G})})]})}}]}),[]),O=Object(a.useMemo)((function(){return r}),[r]);return Object(n.jsxs)(D,{blockName:"Cart",children:[Object(n.jsx)(nt.a,{minW:600,columns:b,action:{changeQuantity:function(e,t){return o.apply(this,arguments)},deleteProduct:function(e){return j.apply(this,arguments)}},data:O}),Object(n.jsxs)(m.a,{mt:4,textAlign:"right",children:["Total:"," ",Object(n.jsx)(B.a,{value:c,displayType:"text",decimalScale:2,thousandSeparator:!0,prefix:"$"})]}),Object(n.jsx)(g.a,{mt:4,as:h.b,to:"/store/checkout",colorScheme:"red",children:"Checkout"})]})}));function st(e){return function(){return Object(U.b)().state.auth.isLogin?Object(n.jsx)(x.a,{to:"/store"}):Object(n.jsx)(e,{})}}var it=st((function(){return Object(n.jsx)(D,{children:Object(n.jsxs)(y.a,{px:["0","20px","100px","400px"],children:[Object(n.jsx)(m.a,{mb:4,children:"Login"}),Object(n.jsx)(Pe,{})]})})}));function ot(){var e=Object(H.b)(),t=e.handleSubmit,r=e.errors,c=e.control,a=Object(U.b)().dispatch,s=Object(_.a)();function i(){return(i=Object(d.a)(u.a.mark((function e(t){var r,n,c,i,o,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(M.w)({input:t});case 3:return r=e.sent,n=r.token,localStorage.setItem("token",n),We.a.setHeader("authorization","Bearer "+n),e.next=9,Object(M.p)();case 9:c=e.sent,i=c.user,o=c.cart,a({type:"SET_AUTH",payload:Object(l.a)(Object(l.a)({},i),{},{isLogin:!0})}),a({type:"SET_CART",payload:o}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),j=e.t0.response,s({title:j.errors[0].message,status:"error"});case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return Object(n.jsx)("form",{onSubmit:t((function(e){return function(e){return i.apply(this,arguments)}(e)})),children:Object(n.jsxs)(f.d,{align:"stretch",p:4,borderWidth:1,borderRadius:"md",children:[Object(n.jsxs)(Te.a,{isInvalid:r.name,children:[Object(n.jsx)(Ee.a,{htmlFor:"name",children:"Fullname:"}),Object(n.jsx)(H.a,{id:"name",name:"name",as:be.a,placeholder:"Please enter your name",defaultValue:"",rules:{required:!0,min:6},control:c}),Object(n.jsx)(Ae.a,{children:"This field is required"})]}),Object(n.jsxs)(Te.a,{isInvalid:r.email,children:[Object(n.jsx)(Ee.a,{htmlFor:"email",children:"Email:"}),Object(n.jsx)(H.a,{id:"email",name:"email",as:be.a,placeholder:"Please enter your email",defaultValue:"",rules:{required:!0,min:6},control:c}),Object(n.jsx)(Ae.a,{children:"This field is required"})]}),Object(n.jsxs)(Te.a,{isInvalid:r.password,children:[Object(n.jsx)(Ee.a,{htmlFor:"password",children:"Password:"}),Object(n.jsx)(H.a,{id:"password",name:"password",as:be.a,type:"password",defaultValue:"",placeholder:"Please enter your password",rules:{required:!0},control:c}),Object(n.jsx)(Ae.a,{children:"This field is required"})]}),Object(n.jsx)(g.a,{type:"submit",colorScheme:"green",children:"Register"})]})})}var jt=st((function(){return Object(n.jsx)(D,{children:Object(n.jsxs)(y.a,{px:["0","20px","100px","400px"],children:[Object(n.jsx)(m.a,{mb:4,children:"Register"}),Object(n.jsx)(ot,{})]})})}));function ut(){var e=Object(H.b)(),t=e.handleSubmit,r=e.errors,c=e.control,a=Object(_.a)();function s(){return(s=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(M.E)(t);case 3:a({title:"A email has been sent. Check your email"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a({title:"Send mail error",status:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(n.jsx)("form",{onSubmit:t((function(e){return function(e){return s.apply(this,arguments)}(e)})),children:Object(n.jsxs)(f.d,{align:"stretch",p:4,borderWidth:1,borderRadius:"md",children:[Object(n.jsxs)(Te.a,{isInvalid:r.email,children:[Object(n.jsx)(Ee.a,{htmlFor:"email",children:"Email:"}),Object(n.jsx)(H.a,{id:"email",name:"email",as:be.a,placeholder:"Please enter your email",defaultValue:"",rules:{required:!0,min:6},control:c}),Object(n.jsx)(Ae.a,{children:"This field is required"})]}),Object(n.jsx)(g.a,{type:"submit",children:"Send Email"})]})})}function lt(e){var t=e.token,r=Object(H.b)(),c=r.handleSubmit,a=r.errors,s=r.control,i=Object(_.a)();function o(){return(o=Object(d.a)(u.a.mark((function e(r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.password,e.prev=1,e.next=4,Object(M.L)({password:n,token:t});case 4:i({title:"Password has been reset",status:"success"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i({title:"Reset password error",status:"error"});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(n.jsx)("form",{onSubmit:c((function(e){return function(e){return o.apply(this,arguments)}(e)})),children:Object(n.jsxs)(f.d,{align:"stretch",p:4,borderWidth:1,borderRadius:"md",children:[Object(n.jsxs)(Te.a,{isInvalid:a.password,children:[Object(n.jsx)(Ee.a,{htmlFor:"password",children:"New password:"}),Object(n.jsx)(H.a,{id:"password",name:"password",as:be.a,type:"password",defaultValue:"",placeholder:"Please enter your new password",rules:{required:!0},control:s}),Object(n.jsx)(Ae.a,{children:"This field is required"})]}),Object(n.jsx)(g.a,{type:"submit",colorScheme:"green",children:"Create new password"})]})})}var dt=st((function(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),r=t[0],c=t[1],s=Object(x.g)().location;return Object(a.useEffect)((function(){var e,t=Object(ne.a)(s.search.substr(1).split("&"));try{for(t.s();!(e=t.n()).done;){var r=e.value.split("=");"token"===r[0]&&c(r[1])}}catch(n){t.e(n)}finally{t.f()}}),[]),Object(n.jsx)(D,{children:Object(n.jsxs)(y.a,{px:["0","20px","100px","400px"],children:[Object(n.jsx)(m.a,{mb:4,children:r?"Create new password":"Reset password"}),r?Object(n.jsx)(lt,{token:r}):Object(n.jsx)(ut,{})]})})}));function bt(){return Object(n.jsxs)(D,{children:[Object(n.jsx)(Z.a,{columns:[1,2,4,5],children:[0,0,0,0,0,0,0,0].map((function(e,t){return Object(n.jsx)(J,{index:t},t)}))}),Object(n.jsxs)(f.a,{mt:6,justify:"center",children:[Object(n.jsx)(g.a,{children:"1"}),Object(n.jsx)(g.a,{children:"1"})]})]})}function Ot(){return Object(n.jsx)(fe.a,{h:"100vh",w:"100%",align:"center",justify:"center",bg:"white",zIndex:"banner",children:Object(n.jsx)(Oe.a,{size:"xl",color:"blue.500"})})}var ht=Object(tt.a)((function(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),r=t[0],c=t[1];function s(){return(s=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(M.D)({id:t});case 3:i(),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function i(){return o.apply(this,arguments)}function o(){return(o=Object(d.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(M.t)();case 3:t=e.sent,r=t.products,c(r),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){i()}),[]),null===r?Object(n.jsx)(Ot,{}):Object(n.jsx)(D,{blockName:"Wishlist",children:Object(n.jsx)(Z.a,{columns:[1,2,4,5],gap:4,children:r.map((function(e){return Object(n.jsxs)(f.d,{borderWidth:1,p:2,align:"stretch",children:[Object(n.jsx)(Se.a,Object(l.a)({},e)),Object(n.jsx)(N.a,{onClick:function(){return function(e){return s.apply(this,arguments)}(e.id)},icon:Object(n.jsx)($.a,{as:T.z})})]},e.id)}))})})})),xt=r(125),pt=r.n(xt),ft=Object(tt.a)((function(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),r=t[0],c=t[1],s=[{Header:"Detail",id:"expanded",Cell:function(e){var t=e.row;return Object(n.jsx)(N.a,Object(l.a)(Object(l.a)({as:"span"},t.getToggleRowExpandedProps()),{},{size:"sm",icon:Object(n.jsx)($.a,{as:T.y}),colorScheme:"green"}))}},{Header:"Total",accessor:"total",Cell:function(e){var t=e.value;return Object(n.jsx)(B.a,{value:t,displayType:"text",decimalScale:2,thousandSeparator:!0,prefix:"$"})}},{Header:"Status",accessor:"status"},{Header:"Date Order",accessor:"createdAt",Cell:function(e){var t=e.value;return pt()(Number(t)).fromNow()}}];Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(M.q)();case 3:t=e.sent,r=t.orders,c(r),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return null===r?Object(n.jsx)(Ot,{}):Object(n.jsx)(D,{blockName:"Order",children:Object(n.jsx)(nt.a,{columns:s,data:r,renderRowSubComponent:function(e){var t=e.row.original;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(m.a,{size:"xl",mb:4,children:"Order Detail"}),Object(n.jsxs)(Z.a,{columns:[1,1,1,2],gap:4,children:[Object(n.jsx)(y.a,{px:4,py:2,children:Object(n.jsxs)(Be.d,{children:[Object(n.jsxs)(Be.c,{children:["Name: ",t.name]}),Object(n.jsxs)(Be.c,{children:["Phone: ",t.phone]}),Object(n.jsxs)(Be.c,{children:["Address: ",t.address]}),Object(n.jsxs)(Be.c,{children:["Status: ",t.status]})]})}),Object(n.jsx)(Xe,{total:t.total,items:t.items})]})]})}})})}));function mt(){return Object(n.jsx)(Re,{children:Object(n.jsxs)(x.d,{children:[Object(n.jsx)(x.b,{path:"/store",component:oe,exact:!0}),Object(n.jsx)(x.b,{path:"/store/list/:section/:id",component:bt}),Object(n.jsx)(x.b,{path:"/store/wishlist",component:ht}),Object(n.jsx)(x.b,{path:"/store/order",component:ft}),Object(n.jsx)(x.b,{path:"/store/book/:slug",component:He,exact:!0}),Object(n.jsx)(x.b,{path:"/store/search",component:Ye,exact:!0}),Object(n.jsx)(x.b,{path:"/store/cart",component:at,exact:!0}),Object(n.jsx)(x.b,{path:"/store/checkout",component:rt,exact:!0}),Object(n.jsx)(x.b,{path:"/store/login",component:it}),Object(n.jsx)(x.b,{path:"/store/register",component:jt}),Object(n.jsx)(x.b,{path:"/store/forgot-password",component:dt}),Object(n.jsx)(x.a,{to:"/store"})]})})}var gt=r(221),vt=r(203),yt=r(136),wt=s.a.lazy((function(){return Promise.all([r.e(2),r.e(4)]).then(r.bind(null,462))})),kt=Object(vt.a)({sm:"578px",md:"768px",lg:"992px",xl:"1200px"}),St=Object(gt.a)({breakpoints:kt}),Ct=Object(yt.a)("pk_test_51HqzdDEEA28cbsApAzfDLBCRMMwZbMeyDy1mDVRfSzOblaXMy0BCAFbAWEGEvgWHsIr2AXYbEsyKmFxn6sIMjjMy00dp59zFwT");var $t=function(){var e=Object(a.useState)(!0),t=Object(b.a)(e,2),r=t[0],c=t[1],s=Object(U.b)().dispatch;return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(M.p)();case 3:t=e.sent,r=t.user,n=t.cart,s({type:"SET_AUTH",payload:Object(l.a)(Object(l.a)({},r),{},{isLogin:!0})}),s({type:"SET_CART",payload:n}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),We.a.setHeader("authorization",""),localStorage.removeItem("token");case 14:return e.prev=14,c(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})))).apply(this,arguments)}localStorage.getItem("token")?function(){e.apply(this,arguments)}():c(!1)}),[s]),Object(n.jsx)(O.a,{theme:St,children:r?Object(n.jsx)(Ot,{}):Object(n.jsx)(Ze.Elements,{stripe:Ct,children:Object(n.jsx)(h.a,{children:Object(n.jsx)(a.Suspense,{fallback:Object(n.jsx)("div",{children:"Loading..."}),children:Object(n.jsxs)(x.d,{children:[Object(n.jsx)(x.b,{path:"/store",component:mt}),Object(n.jsx)(x.b,{path:"/admin",component:wt}),Object(n.jsx)(x.a,{to:"/store"})]})})})})})},Tt=function(e){e&&e instanceof Function&&r.e(5).then(r.bind(null,460)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(184),r(185),r(186);o.a.render(Object(n.jsxs)(a.StrictMode,{children:[Object(n.jsx)(c.a,{}),Object(n.jsx)(U.a,{children:Object(n.jsx)($t,{})})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Tt()},28:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return l}));var n=r(4),c=r(6),a=r(2),s=r(1),i={cart:{total:0,items:[]},auth:{isLogin:!1}};function o(e,t){switch(t.type){case"SET_AUTH":return Object(c.a)(Object(c.a)({},e),{},{auth:t.payload});case"SET_CART":var r=t.payload.reduce((function(e,t){return e+t.quantity*t.price*(1-t.discount)}),0);return Object(c.a)(Object(c.a)({},e),{},{cart:{items:t.payload,total:r}});default:throw new Error}}var j=Object(s.createContext)({});function u(e){var t=e.children,r=Object(s.useReducer)(o,i),c=Object(n.a)(r,2),u=c[0],l=c[1],d=Object(s.useMemo)((function(){return{state:u,dispatch:l}}),[u,l]);return Object(a.jsx)(j.Provider,{value:d,children:t})}function l(){return Object(s.useContext)(j)}},56:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(2),c=r(107),a=r(191),s=r(90),i=r(31),o=r.n(i),j=r(26);function u(e){var t=e.name,r=e.price,i=e.discount,u=e.images,l=void 0===u?[]:u,d=e.slug,b=Object(j.g)();return Object(n.jsxs)(c.a,{align:"flex-start",spacing:4,_hover:{cursor:"pointer"},onClick:function(){b.push("/store/book/"+d)},children:[Object(n.jsx)(a.a,{w:70,objectFit:"contain",src:l[0].secure_url}),Object(n.jsxs)(c.d,{align:"flex-start",children:[Object(n.jsx)(s.a,{fontWeight:"bold",children:t}),Object(n.jsxs)(s.a,{children:[Object(n.jsx)(o.a,{value:r*(1-i),displayType:"text",decimalScale:2,thousandSeparator:!0,prefix:"$"}),i>0&&Object(n.jsx)(s.a,{as:"s",fontSize:"sm",children:Object(n.jsx)(o.a,{value:r,displayType:"text",thousandSeparator:!0,prefix:"$"})})]})]})]})}},57:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(2),c=r(26),a=r(28);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{checkAdmin:!1};return function(){var r=Object(a.b)().state.auth;return r.isLogin?t.checkAdmin&&!r.isAdmin?Object(n.jsx)(c.a,{to:"/store"}):Object(n.jsx)(e,{}):Object(n.jsx)(c.a,{to:"/store/login"})}}},79:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n=r(6),c=r(51),a=r(2),s=r(106),i=r(107),o=r(91),j=r(62),u=r(189),l=r(90),d=r(12),b=r(1),O=r.n(b),h=r(89);function x(e){var t=e.columns,r=e.data,u=e.action,l=e.skipPageReset,b=e.renderRowSubComponent,x=Object(c.a)(e,["columns","data","action","skipPageReset","renderRowSubComponent"]),g=Object(h.useTable)(Object(n.a)({columns:t,data:r,autoResetPage:!l},u),h.useExpanded,h.usePagination),v=g.getTableProps,y=g.getTableBodyProps,w=g.visibleColumns,k=g.headerGroups,S=g.prepareRow,C=g.page,$=g.canPreviousPage,T=g.canNextPage,E=(g.pageOptions,g.pageCount),A=g.gotoPage,W=g.nextPage,P=g.previousPage,z=(g.setPageSize,g.state);z.pageIndex,z.pageSize,z.expanded;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(s.a,{overflowX:"auto",borderRadius:"md",borderWidth:1,children:Object(a.jsxs)(s.a,Object(n.a)(Object(n.a)(Object(n.a)({w:"full",as:"table"},x),v()),{},{children:[Object(a.jsx)("thead",{children:k.map((function(e,t){return Object(a.jsx)(m,Object(n.a)(Object(n.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e,t){return Object(a.jsx)(p,Object(n.a)(Object(n.a)({},e.getHeaderProps()),{},{children:e.render("Header")}),t)}))}),t)}))}),Object(a.jsx)("tbody",Object(n.a)(Object(n.a)({},y()),{},{children:C.map((function(e,t){return S(e),Object(a.jsxs)(O.a.Fragment,{children:[Object(a.jsx)(m,Object(n.a)(Object(n.a)({},e.getRowProps()),{},{children:e.cells.map((function(e,t){return Object(a.jsx)(f,Object(n.a)(Object(n.a)({},e.getCellProps()),{},{children:e.render("Cell")}),t)}))})),e.isExpanded&&Object(a.jsx)(m,{children:Object(a.jsx)(f,{colSpan:w.length,children:b({row:e})})})]},t)}))})),Object(a.jsx)("tfoot",{})]}))}),Object(a.jsxs)(i.a,{my:4,children:[Object(a.jsx)(o.a,{colorScheme:"blue",size:"sm",disabled:!$,icon:Object(a.jsx)(j.a,{as:d.b}),onClick:function(){return A(0)}}),Object(a.jsx)(o.a,{colorScheme:"blue",size:"sm",disabled:!$,icon:Object(a.jsx)(j.a,{as:d.d}),onClick:function(){return P()}}),Object(a.jsx)(o.a,{colorScheme:"blue",size:"sm",disabled:!T,icon:Object(a.jsx)(j.a,{as:d.e}),onClick:function(){return W()}}),Object(a.jsx)(o.a,{colorScheme:"blue",size:"sm",disabled:!T,icon:Object(a.jsx)(j.a,{as:d.c}),onClick:function(){return A(E-1)}})]})]})}function p(e){var t=e.children,r=Object(c.a)(e,["children"]);return Object(a.jsx)(u.a,Object(n.a)(Object(n.a)({as:"th",borderBottomWidth:3,py:4,px:2,textAlign:"left",size:"md"},r),{},{children:t}))}function f(e){var t=e.children,r=Object(c.a)(e,["children"]);return Object(a.jsx)(l.a,Object(n.a)(Object(n.a)({as:"td",borderBottomWidth:1,px:2,py:4},r),{},{children:t}))}function m(e){var t=e.children,r=Object(c.a)(e,["children"]);return Object(a.jsx)(s.a,Object(n.a)(Object(n.a)({as:"tr"},r),{},{children:t}))}},9:function(e,t,r){"use strict";r.d(t,"u",(function(){return c})),r.d(t,"w",(function(){return a})),r.d(t,"E",(function(){return s})),r.d(t,"L",(function(){return i})),r.d(t,"p",(function(){return o})),r.d(t,"q",(function(){return j})),r.d(t,"c",(function(){return u})),r.d(t,"z",(function(){return l})),r.d(t,"n",(function(){return d})),r.d(t,"o",(function(){return b})),r.d(t,"k",(function(){return O})),r.d(t,"b",(function(){return h})),r.d(t,"G",(function(){return x})),r.d(t,"y",(function(){return p})),r.d(t,"a",(function(){return f})),r.d(t,"F",(function(){return m})),r.d(t,"x",(function(){return g})),r.d(t,"j",(function(){return v})),r.d(t,"g",(function(){return y})),r.d(t,"D",(function(){return w})),r.d(t,"t",(function(){return k})),r.d(t,"s",(function(){return S})),r.d(t,"r",(function(){return C})),r.d(t,"f",(function(){return $})),r.d(t,"J",(function(){return T})),r.d(t,"C",(function(){return E})),r.d(t,"e",(function(){return A})),r.d(t,"I",(function(){return W})),r.d(t,"B",(function(){return P})),r.d(t,"m",(function(){return z})),r.d(t,"h",(function(){return I})),r.d(t,"d",(function(){return q})),r.d(t,"H",(function(){return R})),r.d(t,"A",(function(){return D})),r.d(t,"K",(function(){return F})),r.d(t,"i",(function(){return B})),r.d(t,"l",(function(){return _})),r.d(t,"v",(function(){return L}));var n=r(16);function c(e){return Object(n.b)("query($email: String!, $password: String!){token: login(email: $email, password: $password)}",e)}function a(e){return Object(n.b)("mutation($input: UserData){token: register(input: $input)}",e)}function s(e){return Object(n.b)("mutation($email: String!){result: requestResetPassword(email: $email)}",e)}function i(e){return Object(n.b)("mutation($token: String!, $password: String!){result: verifyTokenAndResetPassword(token: $token, password: $password)}",e)}function o(){return Object(n.b)("query{user: getUserInfo{name, isAdmin, email, id} cart:getUserCart{id, name, price, slug, discount, quantity, images{secure_url}}}")}function j(){return Object(n.b)("query{orders: getUserOrders{id, name, address, total, status,  phone, createdAt, items{id, name, price, discount, quantity, images{secure_url}}}}")}function u(e){return Object(n.b)("mutation ($input: CartItemData!){cart: addCartItem(input: $input){id, name, price, slug, discount, quantity, images{secure_url}}}",e)}function l(e){return Object(n.b)("mutation ($productID: ID!){cart: removeCartItem(productID: $productID){id, name, price, slug, discount, quantity, images{secure_url}}}",e)}function d(e){return Object(n.b)("query ($slug: String!){product: getProduct(slug: $slug){id, price, images{public_id, secure_url},discount,description,name, slug, authors{id, name}, category{id, name, parent{id, name, parent{id, name}}}}}",e)}function b(e){return Object(n.b)("query ($search: String, $offset: Int, $limit: Int){products: getProducts(search: $search, offset: $offset, limit: $limit){id, price, images{public_id, secure_url},discount,description,name, slug, authors{id, name}, category{id, name, parent{id, name, parent{id, name}}}}}",e)}function O(){return Object(n.b)("query {categories: getCategories{id, name, icon, children{id, name, icon, children{id}}, parent{id, name}}}")}function h(e){return Object(n.b)("mutation($input: CategoryData){result: addCategory(input: $input){id}}",e)}function x(e){return Object(n.b)("mutation($id: ID, $input: CategoryData){result: updateCategory(id: $id, input: $input){id}}",e)}function p(e){return Object(n.b)("mutation($id: ID){result:removeCategory(id: $id)}",e)}function f(e){return Object(n.b)("mutation($input: AuthorData){result: addAuthor(input: $input){id}}",e)}function m(e){return Object(n.b)("mutation($id: ID, $input: AuthorData){result: updateAuthor(id: $id, input: $input){id}}",e)}function g(e){return Object(n.b)("mutation($id: ID){result:removeAuthor(id: $id)}",e)}function v(){return Object(n.b)("query {authors:getAuthors{id, name, avatar, books, description}}")}function y(e){return Object(n.b)("mutation ($id: ID){result:addWishlist(id: $id)}",e)}function w(e){return Object(n.b)("mutation ($id: ID){result:removeWishlist(id: $id)}",e)}function k(){return Object(n.b)("query{products: getWishlist{id, name, images{secure_url, public_id}, price, discount}}")}function S(e){return Object(n.b)("query($total: Float!){code: getPaymentCode(total: $total)}",e)}function C(){return Object(n.b)("query{users: getUsers{id, name, email, isAdmin}}")}function $(e){return Object(n.b)("mutation($input: UserData!){result: addUser(input: $input){id}}",e)}function T(e){return Object(n.b)("mutation($id: ID!, $input: UserData!){result: updateUser(id: $id, input: $input){id}}",e)}function E(e){return Object(n.b)("mutation($id: ID!){result: removeUser(id: $id)}",e)}function A(e){return Object(n.b)("mutation($input: ProductData!){result: addProduct(input: $input){id}}",e)}function W(e){return Object(n.b)("mutation($id: ID!, $input: ProductData!){result: updateProduct(id: $id, input: $input){id}}",e)}function P(e){return Object(n.b)("mutation($id: ID!){result: removeProduct(id: $id)}",e)}function z(){return Object(n.b)("query{orders: getOrders{id, name, address, total, status, user{email, id, name},phone, createdAt, items{id, name, price, discount, quantity, images{secure_url}}}}")}function I(e){return Object(n.b)("mutation($input: OrderData!){order: checkout(input: $input){id, status}}",e)}function q(e){return Object(n.b)("mutation($input: OrderData!, $userID: ID){order: addOrder(input: $input, userID: $userID){id, status}}",e)}function R(e){return Object(n.b)("mutation($input: OrderData!, $id: ID!){result: updateOrder(input: $input, id: $id){id, status}}",e)}function D(e){return Object(n.b)("mutation($id: ID!){result: removeOrder(id: $id)}",e)}function F(e){return Object(n.b)("\n      mutation($files: [Upload!], $urls: String) {\n        uploadImages(files: $files, urls: $urls) {\n          public_id\n        }\n      }\n    ",e)}function B(e){return Object(n.b)("\n      mutation($public_ids: [String!]) {\n        removeImages(public_ids: $public_ids)\n      }\n    ",e)}function _(e){return Object(n.b)("query ($cursor: String){\n      getImages(cursor: $cursor) {\n        list {\n          secure_url\n          public_id\n        }\n        next_cursor\n      }\n    }",e)}function L(){localStorage.removeItem("token")}}},[[187,1,3]]]);
//# sourceMappingURL=main.ebde4563.chunk.js.map